<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gabada Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .content {
            padding: 30px;
        }

        .join-screen {
            text-align: center;
        }

        .join-screen input {
            padding: 15px 20px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 10px;
            width: 250px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .players-list {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .player {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            margin: 5px 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .player.host {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #2d3436;
        }

        .player.current-turn {
            background: linear-gradient(135deg, #a8e6cf 0%, #88d8a3 100%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .game-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .info-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .timer {
            font-size: 2em;
            font-weight: bold;
            color: #e74c3c;
        }

        .secret-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 10px 0;
        }

        .question-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .question-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 10px 0;
        }

        .questions-history {
            max-height: 200px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .question-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .question-item.yes {
            border-left: 5px solid #27ae60;
        }

        .question-item.no {
            border-left: 5px solid #e74c3c;
        }

        .host-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .btn-yes {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .btn-no {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .guess-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .winner-announcement {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            animation: celebration 1s ease-in-out;
        }

        @keyframes celebration {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ðŸŽ¯ Gabada Games</h1>
            <p>The Ultimate Guessing Game</p>
        </div>
        
        <div class="content">
            <!-- Join Screen -->
            <div id="joinScreen" class="join-screen">
                <h2>Join the Game!</h2>
                <div>
                    <input type="text" id="usernameInput" placeholder="Enter your username" maxlength="20">
                    <br>
                    <button class="btn" onclick="joinGame()">Join Game</button>
                </div>
            </div>

            <!-- Game Screen -->
            <div id="gameScreen" class="hidden">
                <div class="players-list">
                    <h3>Players</h3>
                    <div id="playersList"></div>
                </div>

                <div class="game-info">
                    <div class="info-card">
                        <h4>Round</h4>
                        <div id="roundNumber">1</div>
                    </div>
                    <div class="info-card">
                        <h4>Timer</h4>
                        <div id="timer" class="timer">60</div>
                    </div>
                </div>

                <!-- Host Secret Input -->
                <div id="hostSecretSection" class="hidden">
                    <h3>Host: Enter your secret word/name</h3>
                    <input type="text" id="secretInput" class="secret-input" placeholder="Enter something for others to guess...">
                    <button class="btn" onclick="submitSecret()">Start Round</button>
                </div>

                <!-- Game Play Section -->
                <div id="gamePlaySection" class="hidden">
                    <div class="info-card">
                        <h4>Current Host</h4>
                        <div id="currentHost"></div>
                    </div>

                    <!-- Question Section for Non-Hosts -->
                    <div id="questionSection" class="question-section">
                        <h4>Ask a Yes/No Question</h4>
                        <input type="text" id="questionInput" class="question-input" placeholder="Type your yes/no question here...">
                        <button class="btn" onclick="askQuestion()">Ask Question</button>
                        
                        <div class="guess-section">
                            <h4>Think you know the answer?</h4>
                            <input type="text" id="guessInput" class="question-input" placeholder="Type your guess here...">
                            <button class="btn" onclick="makeGuess()">Make Guess</button>
                        </div>
                    </div>

                    <!-- Host Controls -->
                    <div id="hostControls" class="hidden">
                        <h4>Answer the Question</h4>
                        <div id="currentQuestion" style="font-size: 18px; margin: 20px 0; font-weight: bold;"></div>
                        <div class="host-controls">
                            <button class="btn btn-yes" onclick="answerQuestion(true)">YES</button>
                            <button class="btn btn-no" onclick="answerQuestion(false)">NO</button>
                        </div>
                    </div>

                    <!-- Questions History -->
                    <div class="questions-history">
                        <h4>Questions Asked</h4>
                        <div id="questionsHistory"></div>
                    </div>
                </div>

                <!-- Winner Section -->
                <div id="winnerSection" class="hidden">
                    <div class="winner-announcement">
                        <h2>ðŸŽ‰ Round Complete!</h2>
                        <div id="winnerText"></div>
                        <button class="btn" onclick="nextRound()">Next Round</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            players: [],
            currentHost: 0,
            currentTurn: 0,
            round: 1,
            secret: '',
            questions: [],
            timer: 60,
            timerInterval: null,
            gamePhase: 'joining', // joining, hostInput, playing, roundEnd
            currentPlayer: null,
            pendingQuestion: null
        };

        function joinGame() {
            const username = document.getElementById('usernameInput').value.trim();
            if (!username) {
                alert('Please enter a username!');
                return;
            }
            
            if (gameState.players.find(p => p.name === username)) {
                alert('Username already taken!');
                return;
            }

            const player = {
                name: username,
                score: 0,
                isHost: gameState.players.length === 0
            };

            gameState.players.push(player);
            gameState.currentPlayer = player;

            if (gameState.players.length === 1) {
                gameState.currentHost = 0;
                gameState.currentTurn = 1; // Skip host for first turn
            }

            updatePlayersDisplay();
            
            document.getElementById('joinScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');

            if (gameState.players.length >= 2 && gameState.gamePhase === 'joining') {
                startHostInput();
            }
        }

        function updatePlayersDisplay() {
            const playersList = document.getElementById('playersList');
            playersList.innerHTML = '';

            gameState.players.forEach((player, index) => {
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player';
                
                if (index === gameState.currentHost) {
                    playerDiv.classList.add('host');
                }
                
                if (index === gameState.currentTurn && gameState.gamePhase === 'playing') {
                    playerDiv.classList.add('current-turn');
                }

                playerDiv.innerHTML = `
                    <span>${player.name} ${index === gameState.currentHost ? '(Host)' : ''}</span>
                    <span>${player.score} pts</span>
                `;
                playersList.appendChild(playerDiv);
            });
        }

        function startHostInput() {
            gameState.gamePhase = 'hostInput';
            const currentPlayer = gameState.currentPlayer;
            const isHost = gameState.players.indexOf(currentPlayer) === gameState.currentHost;

            if (isHost) {
                document.getElementById('hostSecretSection').classList.remove('hidden');
                document.getElementById('currentHost').textContent = currentPlayer.name;
            } else {
                document.getElementById('hostSecretSection').classList.add('hidden');
                document.getElementById('currentHost').textContent = gameState.players[gameState.currentHost].name;
                // Wait for host to submit secret
                setTimeout(() => {
                    if (gameState.gamePhase === 'hostInput') {
                        checkGameStart();
                    }
                }, 1000);
            }
        }

        function submitSecret() {
            const secret = document.getElementById('secretInput').value.trim();
            if (!secret) {
                alert('Please enter something to guess!');
                return;
            }

            gameState.secret = secret;
            gameState.gamePhase = 'playing';
            gameState.timer = 60;
            
            document.getElementById('hostSecretSection').classList.add('hidden');
            document.getElementById('gamePlaySection').classList.remove('hidden');
            
            startTimer();
            updateGameDisplay();
        }

        function checkGameStart() {
            if (gameState.secret && gameState.gamePhase === 'playing') {
                document.getElementById('gamePlaySection').classList.remove('hidden');
                updateGameDisplay();
            }
        }

        function updateGameDisplay() {
            const currentPlayer = gameState.currentPlayer;
            const isHost = gameState.players.indexOf(currentPlayer) === gameState.currentHost;
            const isCurrentTurn = gameState.players.indexOf(currentPlayer) === gameState.currentTurn;

            document.getElementById('currentHost').textContent = gameState.players[gameState.currentHost].name;
            
            if (isHost) {
                document.getElementById('questionSection').classList.add('hidden');
                if (gameState.pendingQuestion) {
                    document.getElementById('hostControls').classList.remove('hidden');
                    document.getElementById('currentQuestion').textContent = gameState.pendingQuestion.question;
                } else {
                    document.getElementById('hostControls').classList.add('hidden');
                }
            } else {
                document.getElementById('hostControls').classList.add('hidden');
                if (isCurrentTurn) {
                    document.getElementById('questionSection').classList.remove('hidden');
                } else {
                    document.getElementById('questionSection').classList.add('hidden');
                }
            }

            updatePlayersDisplay();
            updateQuestionsHistory();
        }

        function askQuestion() {
            const question = document.getElementById('questionInput').value.trim();
            if (!question) {
                alert('Please enter a question!');
                return;
            }

            const currentPlayer = gameState.currentPlayer;
            const isCurrentTurn = gameState.players.indexOf(currentPlayer) === gameState.currentTurn;

            if (!isCurrentTurn) {
                alert("It's not your turn!");
                return;
            }

            gameState.pendingQuestion = {
                question: question,
                asker: currentPlayer.name
            };

            document.getElementById('questionInput').value = '';
            updateGameDisplay();
        }

        function answerQuestion(isYes) {
            if (!gameState.pendingQuestion) return;

            const questionData = {
                ...gameState.pendingQuestion,
                answer: isYes,
                timestamp: Date.now()
            };

            gameState.questions.push(questionData);
            gameState.pendingQuestion = null;

            // Move to next player's turn
            do {
                gameState.currentTurn = (gameState.currentTurn + 1) % gameState.players.length;
            } while (gameState.currentTurn === gameState.currentHost);

            updateGameDisplay();
        }

        function makeGuess() {
            const guess = document.getElementById('guessInput').value.trim();
            if (!guess) {
                alert('Please enter a guess!');
                return;
            }

            const currentPlayer = gameState.currentPlayer;
            
            if (guess.toLowerCase() === gameState.secret.toLowerCase()) {
                // Correct guess!
                currentPlayer.score += 10;
                showWinner(currentPlayer.name);
            } else {
                alert('Wrong guess! Keep asking questions.');
                document.getElementById('guessInput').value = '';
            }
        }

        function showWinner(winnerName) {
            gameState.gamePhase = 'roundEnd';
            clearInterval(gameState.timerInterval);
            
            document.getElementById('gamePlaySection').classList.add('hidden');
            document.getElementById('winnerSection').classList.remove('hidden');
            document.getElementById('winnerText').innerHTML = `
                <h3>${winnerName} guessed correctly!</h3>
                <p>The answer was: <strong>${gameState.secret}</strong></p>
                <p>+10 points to ${winnerName}!</p>
            `;
        }

        function nextRound() {
            gameState.round++;
            gameState.currentHost = (gameState.currentHost + 1) % gameState.players.length;
            gameState.currentTurn = (gameState.currentHost + 1) % gameState.players.length;
            gameState.secret = '';
            gameState.questions = [];
            gameState.pendingQuestion = null;
            gameState.gamePhase = 'hostInput';

            document.getElementById('winnerSection').classList.add('hidden');
            document.getElementById('roundNumber').textContent = gameState.round;
            document.getElementById('secretInput').value = '';
            document.getElementById('questionsHistory').innerHTML = '';

            updatePlayersDisplay();
            startHostInput();
        }

        function startTimer() {
            clearInterval(gameState.timerInterval);
            gameState.timerInterval = setInterval(() => {
                gameState.timer--;
                document.getElementById('timer').textContent = gameState.timer;

                if (gameState.timer <= 0) {
                    clearInterval(gameState.timerInterval);
                    showWinner('Nobody - Time\'s up!');
                }
            }, 1000);
        }

        function updateQuestionsHistory() {
            const historyDiv = document.getElementById('questionsHistory');
            historyDiv.innerHTML = '';

            gameState.questions.forEach(q => {
                const questionDiv = document.createElement('div');
                questionDiv.className = `question-item ${q.answer ? 'yes' : 'no'}`;
                questionDiv.innerHTML = `
                    <strong>${q.asker}:</strong> ${q.question}
                    <br><strong>Answer:</strong> ${q.answer ? 'YES' : 'NO'}
                `;
                historyDiv.appendChild(questionDiv);
            });
        }

        // Allow Enter key to submit
        document.getElementById('usernameInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') joinGame();
        });

        document.getElementById('secretInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') submitSecret();
        });

        document.getElementById('questionInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') askQuestion();
        });

        document.getElementById('guessInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') makeGuess();
        });
    </script>
</body>
</html>
